<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="ASSIGN_COM" >
  <resultMap id="BaseResultMap" type="AssignCom" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Jul 08 14:59:41 CST 2015.
    -->
    <id column="ASS_COM_ID" property="assComId" jdbcType="DECIMAL" />
    <result column="COM_NAME" property="comName" jdbcType="VARCHAR" />
    <result column="CONTACT_NAME" property="contactName" jdbcType="VARCHAR" />
    <result column="CONTACT_PHONE" property="contactPhone" jdbcType="VARCHAR" />
    <result column="CONTACT_QQ" property="contactQq" jdbcType="VARCHAR" />
    <result column="REMARKS" property="remarks" jdbcType="VARCHAR" />
    
    <result column="COM_REQ_ID" property="comReqId" jdbcType="DECIMAL" />
    <result column="POS_REQ" property="posReq" jdbcType="VARCHAR" />
    <result column="TYPE_OF_WORK" property="typeOfWork" jdbcType="VARCHAR" />
    <result column="SALARY_PERMONTH" property="salaryPermonth" jdbcType="VARCHAR" />
  </resultMap>

  <delete id="delete" parameterType="java.lang.Integer" >
    delete from ASSIGN_COM
    where ASS_COM_ID = #{assComId,jdbcType=DECIMAL}
  </delete>

  <insert id="insert" parameterType="com.icss.oa.assign.pojo.AssignCom" >
    insert into ASSIGN_COM (ASS_COM_ID, COM_NAME, CONTACT_NAME, 
      CONTACT_PHONE, CONTACT_QQ, REMARKS
      )
    values 
    (
  	asscom_seq.nextval,
    #{comName,jdbcType=VARCHAR}, 
    #{contactName,jdbcType=VARCHAR}, 
    #{contactPhone,jdbcType=VARCHAR}, 
    #{contactQq,jdbcType=VARCHAR}, 
    #{remarks,jdbcType=VARCHAR}
      )
  </insert>
  
  <update id="update" parameterType="AssignCom" >
    update ASSIGN_COM
    set COM_NAME = #{comName,jdbcType=VARCHAR},
      CONTACT_NAME = #{contactName,jdbcType=VARCHAR},
      CONTACT_PHONE = #{contactPhone,jdbcType=VARCHAR},
      CONTACT_QQ = #{contactQq,jdbcType=VARCHAR},
      REMARKS = #{remarks,jdbcType=VARCHAR}
    where ASS_COM_ID = #{assComId,jdbcType=DECIMAL}
  </update>
  
  	<select id="queryById" parameterType="java.lang.Integer" resultMap="BaseResultMap">
	select * from assign_com where ass_com_id=#{assComId,jdbcType=DECIMAL}
	</select>

  	<!-- 判断一个公司的需求个数 -->
  	<select id="queryExist" parameterType="java.lang.Integer" resultType="java.lang.Integer">
	select count(*) from 
		assign_com natural join Com_Req 
		where ass_com_id=#{assComId,jdbcType=DECIMAL}
	</select>
  		 
	<!-- 获得当前的序列主键值 -->
	<select id="getPrimaryKey" resultType="java.lang.Integer">
		select asscom_seq.currval from dual
	</select>
	
	<select id="query" resultMap="BaseResultMap">
		select * from assign_com
	</select>
	
	<select id="getCount" resultType="java.lang.Integer">
		select count(*) from assign_com
	</select>
	
	<!-- 分页查询并生序排列 -->
	<select id="queryByPager" parameterType="java.util.Map" resultMap="BaseResultMap">   
		select * from (select rownum rnum,s.* from (select * from assign_com order by ass_com_id asc) s)
		where
		rnum between #{start} and #{end}
	</select>
	
		<!-- 按条件分页查询并生序排列 -->
	<select id="queryByCondition" parameterType="java.lang.Integer" resultMap="BaseResultMap">   
		select * from assign_com natural join Com_req
		where
		ass_com_id=#{assComId,jdbcType=DECIMAL}
	</select>
  
</mapper>