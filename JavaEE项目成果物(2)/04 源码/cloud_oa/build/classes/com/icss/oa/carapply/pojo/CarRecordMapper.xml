<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="CAR_RECORD" >
  <resultMap id="BaseResultMap" type="CarRecord" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Jul 24 11:11:31 CST 2015.
    -->
    <id column="CARRECORD_ID" property="carrecordId" jdbcType="DECIMAL" />
    <result column="CARAPPLY_ID" property="carapplyId" jdbcType="DECIMAL" />
    <result column="CAR_ID" property="carId" jdbcType="DECIMAL" />
    <result column="DRIVER_ID" property="driverId" jdbcType="DECIMAL" />
    <result column="EMP_ID" property="empId" jdbcType="DECIMAL" />
    <result column="ROUTE" property="route" jdbcType="VARCHAR" />
    <result column="EMP_NAME" property="empName" jdbcType="VARCHAR" />
    <result column="START_TIME" property="startTime" jdbcType="TIMESTAMP" />
    <result column="END_TIME" property="endTime" jdbcType="TIMESTAMP" />
  </resultMap>

  <delete id="delete" parameterType="java.lang.Integer" >
    delete from CAR_RECORD
    where CARRECORD_ID = #{carrecordId,jdbcType=DECIMAL}
  </delete>

  <insert id="insert" parameterType="CarRecord" >
    insert into CAR_RECORD (CARRECORD_ID, CARAPPLY_ID, CAR_ID, 
      DRIVER_ID, ROUTE,START_TIME,END_TIME)
    values (CARRECORD_SEQ.nextval, #{carapplyId,jdbcType=DECIMAL}, #{carId,jdbcType=DECIMAL}, 
      #{driverId,jdbcType=DECIMAL}, #{route,jdbcType=VARCHAR},#{startTime,jdbcType=TIMESTAMP},#{endTime,jdbcType=TIMESTAMP})
  </insert>

  <update id="update" parameterType="CarRecord" >
    update CAR_RECORD
    set CARAPPLY_ID = #{carapplyId,jdbcType=DECIMAL},
      CAR_ID = #{carId,jdbcType=DECIMAL},
      DRIVER_ID = #{driverId,jdbcType=DECIMAL},
      ROUTE = #{route,jdbcType=VARCHAR},
      START_TIME = #{startTime,jdbcType=TIMESTAMP},
      END_TIME = #{endTime,jdbcType=TIMESTAMP}
    where CARRECORD_ID = #{carrecordId,jdbcType=DECIMAL}
  </update>
  
  	 <select id="queryById" parameterType="java.lang.Integer" resultMap="BaseResultMap">
	select * from CAR_RECORD where CARAPPLY_ID=#{carapplyId,jdbcType=DECIMAL}
	 </select>
	 
	<select id="getCount" resultType="java.lang.Integer">
		select count(*) from CAR_RECORD
	</select>
  
  	<!-- 分页查询并升序排列 -->
	<select id="queryByPager" parameterType="java.util.Map"
		resultMap="BaseResultMap">   
		select * from (select rownum rnum,s.* from (select * from CAR_RECORD natural join CAR_APPLY order by CARAPPLY_ID desc) s)
		where
		rnum between #{start} and #{end}
	</select>
	
	  	<!-- 分页查询并升序排列 -->
	<select id="queryAll" parameterType="java.util.Map"
		resultMap="BaseResultMap">   
		select * from 
		CAR_RECORD natural join CAR_APPLY 
		order by CARAPPLY_ID desc
	</select>
	
</mapper>