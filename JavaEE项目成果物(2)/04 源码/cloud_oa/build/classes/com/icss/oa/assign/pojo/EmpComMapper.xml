<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="EMP_COM" >
  <resultMap id="BaseResultMap" type="com.icss.oa.assign.pojo.EmpCom" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Jul 08 14:59:41 CST 2015.
    -->
    <id column="EMP_COM_ID" property="empComId" jdbcType="DECIMAL" />
    <result column="ASS_COM_ID" property="assComId" jdbcType="DECIMAL" />
    <result column="ASS_ID" property="assId" jdbcType="DECIMAL" />
    <result column="ASS_NAME" property="assName" jdbcType="DECIMAL" />
    <result column="AVAILABLE" property="available" jdbcType="DECIMAL" />
    <result column="COM_NAME" property="comName" jdbcType="DECIMAL" />
  </resultMap>


  <delete id="delete" parameterType="java.lang.Integer" >
    delete from EMP_COM
    where EMP_COM_ID = #{empComId,jdbcType=DECIMAL}
  </delete>

  <insert id="insert" parameterType="com.icss.oa.assign.pojo.EmpCom" >
    insert into EMP_COM (EMP_COM_ID, ASS_COM_ID, ASS_ID, ASS_NAME, COM_NAME
      )
    values (
    EmpCom_seq.nextval, 
    #{assComId,jdbcType=DECIMAL},
     #{assId,jdbcType=DECIMAL},
     #{assName,jdbcType=VARCHAR},
     #{comName,jdbcType=VARCHAR}
      )
  </insert>

  <update id="update" parameterType="com.icss.oa.assign.pojo.EmpCom" >
    update EMP_COM
    set ASS_COM_ID = #{assComId,jdbcType=DECIMAL},
      ASS_ID = #{assId,jdbcType=DECIMAL}
    where EMP_COM_ID = #{empComId,jdbcType=DECIMAL}
  </update>
  
  	<!-- 获得当前的序列主键值 -->
	<select id="getPrimaryKey" resultType="java.lang.Integer">
		select EMPCOM_seq.currval from dual
	</select>
	
	<select id="getCount" resultType="java.lang.Integer">
		select count(*) from EMP_COM
	</select>
	
	<select id="queryById" parameterType="java.lang.Integer" resultMap="BaseResultMap">
	select * from Emp_Com natural join ASSIGN_EMP natural join ASSIGN_COM 
	where 
	EMP_COM_ID=#{empComId,jdbcType=DECIMAL} 
	</select>
	
	<!-- 分页查询并升序排列 -->
	<select id="queryByPager" parameterType="java.util.Map"
		resultMap="BaseResultMap">   
		select * from (select rownum rnum,s.* from (select * from Emp_Com order by EMP_COM_ID desc) s)
		where
		rnum between #{start} and #{end}
	</select>
	
	<!-- 查询全部-->
	<select id="queryAll" parameterType="java.util.Map"
		resultMap="BaseResultMap">   
		select * from (select rownum rnum,s.* from (select * from Emp_Com order by EMP_COM_ID desc) s)
	</select>
  
</mapper>