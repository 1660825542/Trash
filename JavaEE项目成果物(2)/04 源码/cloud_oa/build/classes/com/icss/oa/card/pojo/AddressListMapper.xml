<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="ADDRESSLIST" >
  <resultMap id="BaseResultMap" type="com.icss.oa.card.pojo.AddressList" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jun 29 15:25:40 CST 2015.
    -->
    <result column="EMP_ID" property="empId" jdbcType="DECIMAL" />
    <result column="DEPT_NAME" property="deptName" jdbcType="VARCHAR" />
    <result column="EMP_NAME" property="empName" jdbcType="VARCHAR" />
    <result column="EMP_PHONE" property="empPhone" jdbcType="VARCHAR" />
    <result column="DEPT_ID" property="deptId" jdbcType="DECIMAL" />
  </resultMap>
    <select id="query" resultType="java.util.Map" parameterType="java.util.Map">
		select * from (select rownum
		rnum,e.emp_Id,e.emp_Name,t.dept_Name,e.emp_Phone
		from emp e
		left outer join dept t on e.dept_id = t.dept_id) 
		where rnum between #{start} and #{end}
	</select>
	
	<select id="queryById" resultType="java.util.Map" parameterType="java.util.Map">
		select e.emp_Id,e.emp_Name,t.dept_Name,e.emp_Phone
		from emp e
		left outer join dept t on e.dept_id = t.dept_id
		where EMP_ID = #{empId,jdbcType=DECIMAL}
	</select>
	
	<select id="queryByCondition" resultType="java.util.Map" parameterType="java.util.Map">
		select * from (select rownum
		rnum,e.emp_Id,e.emp_Name,t.dept_Name,e.emp_Phone 
		from emp e
		left outer join dept t on e.dept_id = t.dept_id
		<where> 
			<if test="empName != null and empName != ''">    
				and emp_name like '%'||#{empName}||'%'
			</if>
			
		</where>
		) where rnum between
		#{start} and #{end}
	</select>
	
	<select id="getConditionCount" resultType="java.lang.Integer" parameterType="java.util.Map">
		select
		count(*)
		from emp e
		left outer join dept t on e.dept_id = t.dept_id
		<where> 
			<if test="empName != null and empName != ''">    
				and emp_name like '%'||#{empName}||'%'
			</if>
			
		</where>
	</select>

	<select id="getCount" resultType="java.lang.Integer" >
		select
		count(*)
		from emp e
		left outer join dept t on e.dept_id = t.dept_id
	</select>
 
</mapper>