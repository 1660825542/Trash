<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="COM_REQ" >
  <resultMap id="BaseResultMap" type="com.icss.oa.assign.pojo.ComReq" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Jul 08 14:59:41 CST 2015.
    -->
    <id column="COM_REQ_ID" property="comReqId" jdbcType="DECIMAL" />
    <result column="ASS_COM_ID" property="assComId" jdbcType="DECIMAL" />
    <result column="POS_REQ" property="posReq" jdbcType="VARCHAR" />
    <result column="TYPE_OF_WORK" property="typeOfWork" jdbcType="VARCHAR" />
    <result column="SALARY_PERMONTH" property="salaryPermonth" jdbcType="VARCHAR" />
    <result column="COM_NAME" property="comName" jdbcType="VARCHAR" />
  </resultMap>
  
  <delete id="delete" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Jul 08 14:59:41 CST 2015.
    -->
    delete from COM_REQ
    where COM_REQ_ID = #{comReqId,jdbcType=DECIMAL}
  </delete>
  
  <insert id="insert" parameterType="com.icss.oa.assign.pojo.ComReq" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Jul 08 14:59:41 CST 2015.
    -->
    insert into COM_REQ (COM_REQ_ID, ASS_COM_ID, POS_REQ, 
      TYPE_OF_WORK, SALARY_PERMONTH)
    values (
     comreq_id.nextval,
     #{assComId,jdbcType=DECIMAL},
     #{posReq,jdbcType=VARCHAR}, 
     #{typeOfWork,jdbcType=VARCHAR}, 
     #{salaryPermonth,jdbcType=VARCHAR})
  </insert>
  
  	<select id="queryById" parameterType="java.lang.Integer" resultMap="BaseResultMap">
	select * from COM_REQ natural join ASSIGN_COM
	where 
	COM_REQ_ID=#{comReqId,jdbcType=DECIMAL} 
	</select>

  <update id="update" parameterType="com.icss.oa.assign.pojo.ComReq" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Jul 08 14:59:41 CST 2015.
    -->
    update COM_REQ
    set ASS_COM_ID = 
    #{assComId,jdbcType=DECIMAL},
      POS_REQ = 
      #{posReq,jdbcType=VARCHAR},
      TYPE_OF_WORK = 
      #{typeOfWork,jdbcType=VARCHAR},
      SALARY_PERMONTH = 
      #{salaryPermonth,jdbcType=VARCHAR}
    where COM_REQ_ID = 
    #{comReqId,jdbcType=DECIMAL}
  </update>
  
  	<!-- 分页查询并生序排列 -->
	<select id="queryByPager" parameterType="java.util.Map"
		resultMap="BaseResultMap">   
		select * from (select rownum rnum,s.* from (select * from COM_REQ natural join ASSIGN_COM order by ASS_COM_ID asc) s)
		where
		rnum between #{start} and #{end}
	</select>
	
	  	<!-- 获得当前的序列主键值 -->
	<select id="getPrimaryKey" resultType="java.lang.Integer">
		select COMREQ_ID.currval from dual
	</select>
	
	<select id="getCount" resultType="java.lang.Integer">
		select count(*) from COM_REQ
	</select>
</mapper>