<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="CAR_FLOW_LOG" >
  <resultMap id="BaseResultMap" type="com.icss.oa.carapply.pojo.CarFlowLog" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Jul 24 11:11:31 CST 2015.
    -->
    <id column="ID" property="id" jdbcType="DECIMAL" />
    <result column="USERID" property="userid" jdbcType="VARCHAR" />
    <result column="ACTION" property="action" jdbcType="DECIMAL" />
    <result column="LOGTIME" property="logtime" jdbcType="TIMESTAMP" />
    <result column="OPINION" property="opinion" jdbcType="VARCHAR" />
    <result column="TASKID" property="taskid" jdbcType="VARCHAR" />
    <result column="DEFINEID" property="defineid" jdbcType="VARCHAR" />
    <result column="PROCINSID" property="procinsid" jdbcType="VARCHAR" />
    <result column="RECORDID" property="recordid" jdbcType="VARCHAR" />
    <result column="USERNAME" property="username" jdbcType="VARCHAR" />
  </resultMap>

  <insert id="insert" parameterType="com.icss.oa.carapply.pojo.CarFlowLog" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Jul 24 11:11:31 CST 2015.
    -->
    insert into CAR_FLOW_LOG (ID, USERID, ACTION, 
      LOGTIME, OPINION, TASKID, 
      DEFINEID, PROCINSID, RECORDID,USERNAME
      )
    values (
    car_flow_log_seq.nextval, 
    #{userid,jdbcType=VARCHAR}, 
    #{action,jdbcType=DECIMAL}, 
    sysdate, 
    #{opinion,jdbcType=VARCHAR},
    #{taskid,jdbcType=VARCHAR}, 
    #{defineid,jdbcType=VARCHAR}, 
    #{procinsid,jdbcType=VARCHAR}, 
    #{recordid,jdbcType=VARCHAR},
    #{username,jdbcType=VARCHAR}
      )
  </insert>
  
  <!-- 查询所有流程日志 -->
  <select id="query" resultMap="BaseResultMap">
     select * from car_flow_log       
  </select>
  
  <!-- 查询指定用车记录的流程日志 -->
  <select id="queryByCarApplyId" parameterType="java.lang.Integer" resultMap="BaseResultMap">
     select * from car_flow_log where recordid=#{Id}  order by logtime asc
  </select>
  
  <!-- 根据流程id得到用车记录id -->
  <select id="queryRecordidByProid" parameterType="java.lang.String" resultType="java.lang.String">
      select distinct(recordid) from car_flow_log where procinsid=#{proId}
  </select>

  
</mapper>